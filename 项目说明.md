# ESP32S3监控项目

## 项目简介

这是一个基于ESP32S3开发的WiFi配置管理器项目，使用Arduino IDE开发环境。项目采用FreeRTOS任务调度，实现现代化的Web界面WiFi配置功能，支持NVS存储，具有完整的模块化C++设计架构。

## 功能特性

### 核心功能
- **多WiFi配置管理**: 支持保存最多3个WiFi配置，按优先级自动连接
- **智能WiFi连接**: 按顺序尝试多个配置，连接失败自动切换
- **AP配置模式**: 无WiFi时自动启动热点配置模式
- **现代化Web界面**: 响应式设计的WiFi配置页面，支持配置列表管理
- **OTA固件升级**: 支持通过Web界面在线升级固件，实时进度监控
- **NVS存储**: WiFi配置信息持久化存储，支持多配置管理
- **实时状态监控**: WiFi连接状态和系统信息监控
- **系统信息展示**: 芯片信息、内存使用、运行时间等

### 技术特性
- 基于FreeRTOS多任务架构
- 模块化C++面向对象设计
- RESTful API接口
- JSON数据交换格式
- 现代化UI/UX设计
- 移动端响应式适配

## 技术规格

- **开发板**: ESP32S3
- **开发环境**: Arduino IDE
- **编程语言**: C++
- **操作系统**: FreeRTOS
- **Web服务器**: ESP32 WebServer
- **存储**: NVS (Non-Volatile Storage)
- **界面**: HTML5 + CSS3 + JavaScript
- **数据格式**: JSON
- **调试方式**: printf输出（无串口配置）

## 系统架构

### 文件结构

```
ESP32S3_Monitor/
├── ESP32S3_Monitor.ino        # 主程序文件
├── Monitor.h                  # 监控器类头文件
├── Monitor.cpp                # 监控器类实现文件
├── ConfigStorage.h            # NVS配置存储类头文件
├── ConfigStorage.cpp          # NVS配置存储类实现文件
├── WiFiManager.h              # WiFi管理器类头文件
├── WiFiManager.cpp            # WiFi管理器类实现文件
├── WebServerManager.h         # Web服务器管理器类头文件
├── WebServerManager.cpp       # Web服务器管理器类实现文件
├── WebServerManager_UI.cpp    # Web界面UI实现文件
├── OTAManager.h               # OTA升级管理器类头文件
├── OTAManager.cpp             # OTA升级管理器类实现文件
└── 项目说明.md                # 项目说明文档
```

### 类设计架构

- **Monitor类**: 核心监控器类，负责Hello World输出任务
- **ConfigStorage类**: NVS存储管理类，负责WiFi配置的持久化存储
- **WiFiManager类**: WiFi连接管理类，负责WiFi连接、重连和AP模式切换
- **WebServerManager类**: Web服务器管理类，负责HTTP服务器和API接口
- **OTAManager类**: OTA升级管理类，负责固件升级流程控制和状态管理

### 任务设计

- **HelloWorldTask**: 优先级2，持续输出"hello world"
- **WiFiManagementTask**: 优先级3，WiFi连接状态监控和管理
- **WebServerTask**: 优先级2，处理HTTP请求和客户端连接

### API接口

- `GET /` - 主配置页面
- `GET /scan` - WiFi网络扫描
- `POST /save` - 保存WiFi配置
- `GET /status` - 获取系统状态
- `GET /info` - 获取系统信息
- `GET /restart` - 重启设备
- `GET /reset` - 重置所有配置
- `GET /wifi-configs` - 获取已保存的WiFi配置列表
- `DELETE /wifi-configs` - 删除指定的WiFi配置
- `POST /connect-wifi` - 手动连接指定的WiFi配置
- `POST /ota-upload` - 上传固件文件进行OTA升级
- `GET /ota-status` - 获取OTA升级状态和进度
- `POST /ota-reboot` - OTA升级成功后重启设备

## 使用说明

### 首次配置

1. 将程序上传到ESP32S3开发板
2. 设备启动后会自动进入AP配置模式
3. 使用手机或电脑连接WiFi热点：`ESP32S3-Config`，密码：`12345678`
4. 浏览器打开 `http://192.168.4.1` 进入配置界面
5. 扫描并选择目标WiFi网络，输入密码
6. 点击连接，设备将自动连接到指定WiFi网络
7. 连接成功后，设备会显示获得的IP地址

### 正常使用

- 设备会自动连接到已配置的WiFi网络
- 连接成功后可通过获得的IP地址访问Web界面
- WiFi连接断开时会自动尝试重连
- 重连失败会自动切换到AP配置模式

### Web界面功能

- **状态指示器**: 实时显示WiFi连接状态（已连接/AP模式/未连接）
- **已保存配置**: 显示已保存的WiFi配置列表，包含优先级标识
- **配置管理**: 支持手动连接和删除WiFi配置
- **WiFi扫描**: 扫描附近可用WiFi网络
- **网络列表**: 显示信号强度和安全类型
- **配置表单**: WiFi SSID和密码输入
- **固件升级**: 支持.bin文件上传，实时进度显示，升级状态监控
- **系统信息**: 设备型号、固件版本、运行时间、可用内存
- **设备管理**: 重启设备、刷新信息、恢复默认配置

## 编译和运行

### 环境要求

1. Arduino IDE 1.8.19 或更高版本
2. ESP32 开发板包 v2.0.0 或更高版本
3. 所需库：
   - WiFi (ESP32内置)
   - WebServer (ESP32内置)
   - Preferences (ESP32内置)
   - ArduinoJson (需安装)

### 编译步骤

1. 在Arduino IDE中打开`ESP32S3_Monitor.ino`
2. 选择开发板：ESP32S3 Dev Module
3. 配置参数：
   - CPU Frequency: 240MHz
   - Flash Size: 16MB
   - Partition Scheme: 
     - **推荐方案一**：使用项目自带的`partitions.csv`（需要手动配置）
     - **简单方案二**：选择Arduino IDE内置的OTA支持方案
4. **使用自定义分区表**（推荐）：
   - 将`partitions.csv`文件放在项目根目录
   - 在Arduino IDE中：工具 → Partition Scheme → Custom
   - 或者编辑项目的`boards.txt`添加自定义分区支持
5. **使用内置分区方案**（简单）：
   - Partition Scheme: **Minimal SPIFFS (1.9MB APP with OTA/190KB SPIFFS)**
   - 或选择：**16M Flash (3MB APP/9.9MB FATFS)**
6. 编译并上传到开发板
7. 打开串口监视器查看启动日志

### OTA分区说明

项目提供的`partitions.csv`分区表配置（最大化利用16MB Flash）：
- **app0/app1**: 各6MB，支持超大型固件和丰富功能
- **nvs**: 20KB，存储WiFi配置等
- **otadata**: 8KB，存储OTA状态
- **spiffs**: 4MB，大容量文件系统存储

⚠️ **重要提醒**：
- 必须选择支持OTA的分区方案才能使用固件升级功能
- 单APP分区的方案（如Default 4MB with spiffs）不支持OTA
- 首次刷入OTA固件后，后续可通过Web界面升级

## 版本更新日志

### v3.0.17 (优化文件管理器容器层级结构) - 小版本更新
- 🏗️ **容器结构简化**
  - 移除按钮区域多余的双层白色容器包装
  - 去掉`.card.action-card`外层容器，直接使用`.action-buttons`
  - 减少HTML层级复杂度，提升页面渲染性能
- 🎨 **视觉统一化**
  - 调整按钮容器样式，与页面其他card容器保持一致
  - 统一使用白色背景和16px圆角
  - 保持相同的阴影效果和间距规范
- 🧹 **代码优化**
  - 移除不再使用的`.action-card`CSS样式
  - 简化容器边距和背景设置
  - 清理多余的毛玻璃效果样式

### v3.0.16 (简化文件管理器按钮设计，移除图标) - 小版本更新
- 🎯 **按钮设计简化**
  - 移除所有按钮前的emoji图标（🔄📝📤🗑️🏠）
  - 保持纯文字按钮设计，更加简洁明了
  - 移除图标相关的CSS样式代码
- 🧹 **代码优化**
  - 清理不再使用的`.btn-icon`和图标悬停动画样式
  - 简化HTML结构，移除多余的span标签
  - 保持现有的毛玻璃背景和Grid布局优势
- 📱 **保持响应式设计**
  - 维持之前优化的Grid布局和响应式适配
  - 按钮交互动效（悬停上浮、点击缩放）依然保留
  - 移动端适配和触摸体验不受影响

### v3.0.15 (美化文件管理器按钮布局和交互体验) - 小版本更新
- 🎨 **按钮布局重新设计**
  - 采用现代化CSS Grid布局，替代传统flex布局
  - 按钮区域添加毛玻璃背景效果，增强视觉层次
  - 优化按钮间距和排列，支持响应式自适应布局
  - 桌面端：自适应网格，最小宽度140px
  - 平板端：2列网格布局
  - 手机端：单列垂直布局
- 🎯 **按钮视觉升级**
  - 为每个按钮添加语义化图标：🔄刷新、📝新建、📤上传、🗑️格式化、🏠首页
  - 增加按钮高度和内边距，提升点击体验
  - 新增光泽扫过动画效果，悬停时触发
  - 优化按钮圆角和阴影，现代化设计风格
- ✨ **交互动效增强**
  - 悬停时按钮上浮并微微放大（scale 1.02）
  - 点击时按钮缩小反馈（scale 0.98）
  - 图标悬停时旋转放大动画效果
  - 平滑的cubic-bezier缓动函数，提升动画质感
- 📱 **移动端适配优化**
  - 小屏设备按钮自动调整大小和字体
  - 图标间距在移动端自适应缩小
  - 确保触摸操作的友好性和可访问性

### v3.0.14 (修复文件管理器存储容量可视化显示) - 小版本更新
- 🔧 **存储容量显示修复**
  - 新增可视化进度条显示文件系统存储使用情况
  - 添加动态颜色渐变，根据使用率自动调整：
    - 绿色：0-50% 使用率（正常状态）
    - 蓝色：50-75% 使用率（中等使用）
    - 橙色：75-90% 使用率（警告状态）
    - 红色：90-100% 使用率（危险状态）
- 📊 **可视化功能增强**
  - 添加带有光泽动画效果的进度条
  - 显示精确的使用百分比和容量信息（已用/总容量）
  - 进度条宽度和颜色会根据存储容量变化实时更新
  - 平滑的动画过渡效果，提升用户体验
- 🎨 **UI界面优化**
  - 新增独立的"存储容量"卡片模块
  - 现代化的进度条设计，带有阴影和渐变效果
  - 响应式布局，在不同屏幕尺寸下均能正确显示
- 🚀 **实时更新机制**
  - 文件上传、删除、创建操作后自动刷新存储状态显示
  - 修复了之前存储容量显示不会动态变化的问题
  - 确保存储信息与实际文件系统状态保持同步

### v3.3.25 (优化返回首页按钮样式和大小) - 小版本更新
- 🎨 **按钮样式优化**
  - 移除返回首页按钮中的"←"箭头符号，使文字更简洁
  - 调整按钮文字为纯"返回首页"，去除视觉干扰元素
- 📏 **按钮尺寸调整**
  - 增大按钮尺寸，与"选择固件文件"按钮保持相似大小
  - 桌面端：`padding: 12px 20px; font-size: 1rem; font-weight: 600`
  - 移动端：`padding: 10px 16px; font-size: 0.9rem`
- 📐 **布局空间调整**
  - 增加卡片顶部内边距到70px，为更大的按钮预留充足空间
  - 移动端卡片顶部内边距调整为60px
  - 确保按钮与内容区域有合适的视觉分离
- ✨ **视觉一致性**
  - 按钮字体粗细与其他主要按钮保持一致（font-weight: 600）
  - 使用居中对齐（justify-content: center）确保文字完美居中
  - 保持蓝色渐变背景和阴影效果
- 🚀 **用户体验**
  - 按钮更加醒目，易于识别和点击
  - 文字简洁明了，提升可读性
  - 与页面其他按钮形成统一的设计语言

### v3.3.24 (返回首页按钮移至白色容器内右上角) - 小版本更新
- 🎯 **布局重新设计**
  - 将返回首页按钮从页面容器移动到白色卡片容器内部的右上角
  - 按钮现在位于白色内容区域内，更加协调统一
  - 调整card容器为`position: relative`，为按钮绝对定位提供定位上下文
- 🎨 **视觉样式优化**
  - 按钮改用蓝色渐变背景，与项目主色调保持一致
  - 移除半透明毛玻璃效果，改用实色设计更清晰
  - 添加蓝色阴影效果，增强视觉层次感
  - 调整按钮定位为距卡片顶部和右侧各16px
- 📐 **空间布局调整**
  - 增加卡片顶部内边距到60px，为按钮预留充足空间
  - 移动端卡片顶部内边距调整为50px，按钮定位12px
  - 确保按钮不会与卡片内容重叠
- 📱 **响应式完善**
  - 移动端按钮尺寸和定位相应调整
  - 保持在各种屏幕尺寸下的良好显示效果
  - 按钮与卡片内容的空间关系保持协调
- 💫 **用户体验提升**
  - 按钮位置更加直观，明确属于当前页面内容
  - 保持hover动画和交互效果
  - 整体设计更加整洁和专业

### v3.3.23 (固件升级页面返回按钮移动到右上角) - 小版本更新
- 🎯 **精确定位**
  - 将返回首页按钮移动到页面容器的右上角（绝对定位）
  - 使用`position: absolute; top: 20px; right: 20px;`实现精确定位
  - 按钮现在悬浮在页面右上角，不占用文档流空间
- 🎨 **视觉优化**
  - 恢复标题的完全居中布局，移除flex布局复杂性
  - 调整按钮大小和间距，使其更加紧凑美观
  - 添加`z-index: 10`确保按钮始终显示在最前层
- 📱 **响应式改进**
  - 移动端按钮定位调整为`top: 16px; right: 16px;`
  - 减小移动端按钮尺寸和字体，适配小屏幕
  - 统一容器padding的响应式处理
- 🚀 **用户体验**
  - 按钮位置固定在右上角，符合用户期望
  - 不干扰页面主要内容的布局
  - 保持毛玻璃效果和hover动画
  - 各种屏幕尺寸下都有一致的视觉效果

### v3.3.22 (调整固件升级页面返回按钮到右侧) - 小版本更新
- 🎨 **布局优化**
  - 将返回首页按钮调整到页面右侧，与标题在同一行显示
  - 使用Flexbox布局实现标题居中、按钮右对齐的效果
  - 标题使用`flex: 1`占据中间空间，按钮固定在右侧
- 🔧 **样式改进**
  - Header改用`display: flex`和`justify-content: space-between`布局
  - 添加`flex-wrap: wrap`和`gap: 16px`确保内容换行时的间距
  - 按钮添加`white-space: nowrap`防止文字换行
- 📱 **响应式设计**
  - 移动端自动切换为垂直布局（`flex-direction: column`）
  - 小屏幕下标题和按钮居中对齐，保持良好的可读性
  - 调整移动端标题字体大小为2rem
- 💫 **用户体验**
  - 桌面端：标题居中，按钮在右上角，布局更紧凑
  - 移动端：垂直布局，避免空间不足时的显示问题
  - 保持所有交互效果和视觉样式

### v3.3.21 (调整固件升级页面返回按钮到标题下方) - 小版本更新
- 🎨 **布局重新设计**
  - 将返回首页按钮从右上角移动到"固件升级"标题下方
  - 改为居中对齐的按钮布局，与页面整体风格更协调
  - 移除绝对定位，采用正常文档流布局
- 🔧 **样式优化**
  - 移除header的额外padding-top，简化布局结构
  - 按钮使用inline-flex布局，支持图标和文字的水平排列
  - 增加按钮内边距和间距，提升视觉效果
- 📱 **响应式改进**
  - 简化移动端样式，移除不必要的布局调整
  - 按钮在各种屏幕尺寸下都保持良好的显示效果
- 💫 **用户体验**
  - 按钮位置更符合常规页面导航习惯
  - 标题和按钮形成清晰的视觉层次
  - 保持毛玻璃效果和hover动画

### v3.3.20 (修复固件升级页面返回按钮与标题重叠问题) - 小版本更新
- 🐛 **布局修复**
  - 修复返回首页按钮与"固件升级"标题在同一行显示的问题
  - 为header区域添加50px上内边距，使标题与返回按钮垂直分离
  - 保持返回按钮在右上角的位置，标题居中显示在下方
- 📱 **响应式优化**
  - 移动端header上内边距调整为40px，适配小屏幕
  - 确保各种屏幕尺寸下的良好显示效果
- 🎨 **视觉改进**
  - 增加了标题与按钮之间的视觉层次感
  - 提升页面整体的美观度和专业性
  - 保持功能完整性的同时优化视觉体验

### v3.3.19 (固件升级页面返回按钮位置优化) - 小版本更新
- 🎨 **界面布局优化**
  - 将固件升级页面的"返回首页"按钮从底部移动到右上角
  - 采用半透明毛玻璃效果设计，与页面背景融合自然
  - 删除底部冗余的操作按钮区域，简化页面结构
- 📱 **响应式设计**
  - 新增`.back-home-btn`样式，支持hover动画效果
  - 为移动端优化按钮大小和字体，确保良好的触摸体验
  - 按钮使用绝对定位，不影响页面其他元素布局
- 🚀 **用户体验提升**
  - 右上角位置更符合用户操作习惯
  - 减少页面滚动，一键直达返回功能
  - 保持页面整体设计的简洁性和现代感

### v3.3.18 (OTA结果提示框圆角样式优化) - 小版本更新
- 🎨 **样式统一**
  - 为OTA升级成功提示框（绿色）添加12px圆角，与其他UI元素保持一致
  - 为OTA升级失败提示框（红色）同样添加12px圆角
  - 修复样式不搭配的视觉问题，提升整体界面协调性
- 📱 **用户体验**
  - 所有提示框现在都采用统一的圆角设计语言
  - 增强界面的现代化和专业性
  - 保持与项目整体UI风格的一致性

### v3.3.17 (修复OTA升级按钮布局重叠问题) - 小版本更新
- 🐛 **布局修复**
  - 修复OTA升级时"升级中..."文字与loading圆圈重叠的问题
  - 优化按钮loading状态的布局，改用flex布局并设置间距
  - loading状态下隐藏原按钮文字，避免视觉重叠
- 🎨 **样式优化**
  - 修改`.btn-loading`样式，使用`display: flex`和`gap: 8px`实现水平排列
  - 添加`.btn-loading.absolute`类支持绝对定位场景（保持向后兼容）
  - loading状态显示为"圆圈 + 升级中..."的水平布局
- 🔧 **JavaScript优化**
  - 上传开始时隐藏原按钮文字并显示完整的loading状态
  - 重置时正确恢复按钮的原始状态和文字
  - 增强按钮状态管理的健壮性
- 📱 **用户体验**
  - 升级过程中界面元素不再重叠，视觉效果更清晰
  - loading状态更加直观易懂
  - 保持升级功能的完整性和可靠性

### v3.3.16 (移除OTA页面面包屑导航) - 小版本更新
- 🎨 **界面简化**
  - 移除OTA固件升级页面顶部的面包屑导航"首页 / 固件升级"
  - 简化页面布局，减少视觉冗余元素
  - 保留底部的"返回首页"按钮提供便捷导航
- ✅ **代码清理**
  - 删除面包屑导航相关的HTML结构
  - 移除不再使用的CSS样式：`.breadcrumb`、`.breadcrumb a`、`.breadcrumb a:hover`
  - 优化代码结构，减少冗余代码
- 📱 **用户体验**
  - 更简洁的页面设计，减少用户注意力分散
  - 突出核心功能区域，提升固件升级操作的专注度
  - 保持功能完整性，升级流程不受影响

### v3.3.15 (增加OTA升级完成后自动跳转首页功能) - 小版本更新
- 🚀 **用户体验优化**
  - 修复OTA升级完成后不会自动跳转回首页的问题
  - 添加智能设备重启检测和自动跳转逻辑
  - 升级成功后会自动检测设备重启状态并跳转到首页
- ✅ **功能完善**
  - 新增`waitForDeviceReboot()`函数，实时监控设备重启状态
  - 升级成功后显示"设备重启中..."状态，并开始检测设备恢复
  - 每2秒检查一次设备状态，最多等待60秒（30次检查）
  - 设备恢复后显示"升级成功，正在跳转到首页..."并自动跳转
- 🔧 **兜底机制**
  - 如果等待超时，会显示手动跳转链接
  - 提供备用的"点击这里返回首页"链接
  - 确保在各种网络情况下用户都能正常返回首页
- 📱 **流程优化**
  - OTA升级 → 显示成功 → 发送重启请求 → 监控重启状态 → 自动跳转首页
  - 整个流程无需用户手动干预，提供完整的升级体验

### v3.3.14 (修复OTA升级进度大小显示问题) - 小版本更新
- 🐛 **OTA功能修复**
  - 修复OTA升级过程中进度大小显示"0 / 0 字节"的问题
  - 在JavaScript progress事件中添加文件大小信息更新
  - 在updateOTAStatus函数中添加服务器端大小信息显示
  - 在startOTAUpload函数中添加初始进度大小显示
- ✅ **进度监控完善**
  - XMLHttpRequest progress事件现在正确显示：`formatBytes(e.loaded) + ' / ' + formatBytes(e.total)`
  - OTA状态API返回的totalSize和writtenSize信息得到正确显示
  - 用户现在可以看到实时的上传进度：如"1.2 MB / 4.5 MB"
- 🔧 **代码优化**
  - 确保OTAManager.getStatusJSON()返回的大小信息被正确使用
  - 改善用户体验，提供准确的升级进度信息
  - 保持所有现有OTA功能的稳定性

### v3.3.13 (修复中括号恢复时的语法错误) - 小版本更新
- 🐛 **语法错误修复**
  - 修复v3.3.12中引入的语法错误：`\"'>[下载]` → `\">[下载]`
  - 移除了多余的单引号，确保HTML属性语法正确
  - 生成正确的JavaScript代码：`onclick="downloadFile('' + f.name + '')">[下载]`
- ✅ **功能验证**
  - 保持文件操作按钮的中括号显示：[下载]、[重命名]、[删除]
  - 确保所有按钮功能正常工作
  - 彻底解决JavaScript语法错误问题
- 🔧 **代码质量**
  - 继续使用稳定的单引号转义方案
  - 确保HTML和JavaScript语法完全正确
  - 提高代码的健壮性和可维护性

### v3.3.12 (恢复文件操作按钮中括号显示) - 小版本更新
- 🎨 **界面显示恢复**
  - 恢复文件操作按钮的中括号装饰
  - 按钮文本从"下载"、"重命名"、"删除"改回"[下载]"、"[重命名]"、"[删除]"
  - 保持传统的按钮标识风格
- ✅ **技术稳定性**
  - 继续使用v3.3.11中修复的单引号转义方案
  - 确保JavaScript语法完全正确：`onclick="downloadFile('' + f.name + '')"`
  - 避免了之前的双引号转义问题
- 🔧 **功能保障**
  - 所有文件操作功能正常工作
  - 文件管理器页面稳定运行
  - 保持良好的用户交互体验

### v3.3.11 (彻底解决JavaScript语法错误，采用单引号转义方案) - 小版本更新
- 🐛 **根本问题解决**
  - 发现双引号转义方案 `\\\"` 在多层字符串嵌套中仍有问题
  - 改用单引号转义方案 `\\'`，避免复杂的双引号转义冲突
  - 生成的JavaScript代码：`onclick="downloadFile('' + f.name + '')"`
- 🔧 **转义策略优化**
  - 放弃复杂的双引号转义，采用更简单可靠的单引号方案
  - 确保在C++→HTML→JavaScript的多层转换中语法正确
  - 彻底消除"Invalid regular expression flags"错误
- ✅ **功能验证**
  - 解决refreshFiles函数未定义的问题
  - 确保所有文件操作按钮正常工作
  - 文件管理器页面可以正常加载和使用

### v3.3.10 (修复JavaScript转义语法错误，确保代码正确性) - 小版本更新
- 🐛 **关键语法错误修复**
  - 修复文件操作按钮中的 `\"'>` 语法错误
  - 将错误的单引号转义 `\\'` 改为正确的双引号转义 `\\\"`
  - 解决JavaScript解析器无法正确处理HTML属性的问题
- 🔧 **转义字符优化**
  - 统一使用双引号转义方案，避免混合使用导致的语法冲突
  - 确保生成的HTML代码语法完全正确
  - 提高JavaScript代码的解析成功率
- ✅ **功能稳定性保障**
  - 彻底解决"Invalid regular expression flags"错误
  - 确保所有文件操作按钮正常工作
  - 保持简洁的按钮显示效果（无中括号）

### v3.3.9 (简化文件操作按钮显示，去除中括号) - 小版本更新
- 🎨 **界面简化优化**
  - 移除文件操作按钮的中括号装饰
  - 按钮文本从"[下载]"、"[重命名]"、"[删除]"改为"下载"、"重命名"、"删除"
  - 采用更简洁的按钮设计风格
- ✨ **用户体验提升**
  - 界面更加简洁清爽
  - 按钮功能表达更直接明了
  - 符合现代化界面设计趋势
- 🔧 **技术稳定性**
  - 保持JavaScript代码的正确性和稳定性
  - 确保所有文件操作功能正常工作
  - 维持良好的代码可维护性

### v3.3.8 (修复HTML语法错误，恢复文件操作按钮中括号) - 小版本更新
- 🐛 **HTML语法错误修复**
  - 修复文件操作按钮HTML代码中的引号位置错误
  - 解决 `onclick=\"downloadFile(\\''+f.name+'\\')\"'>[下载]` 中多余引号问题
  - 正确的语法：`onclick=\"downloadFile(\\''+f.name+'\\')\">[下载]`
- ✅ **功能恢复**
  - 恢复文件操作按钮的中括号显示：[下载]、[重命名]、[删除]
  - 彻底解决"Invalid regular expression flags"错误
  - 修复"refreshFiles is not defined"错误
- 🎯 **用户体验优化**
  - 文件管理器页面现在可以正常加载和使用
  - 所有文件操作功能完全正常
  - 按钮显示更加规范和统一

### v3.3.4 (修复文件上传功能，完善交互体验) - 小版本更新
- 🔧 **文件上传功能修复**
  - 重新设计文件上传处理逻辑，解决上传不生效的问题
  - 采用分块写入方式，支持大文件上传
  - 修复ESP32 WebServer文件上传的数据累积问题
- ✨ **交互体验完善**
  - 新增完整的拖拽上传功能，支持多文件同时上传
  - 添加上传进度提示和状态反馈
  - 优化上传区域的视觉反馈（边框颜色变化）
  - 完善错误处理和用户提示机制
- 🛠️ **代码架构优化**
  - 将sanitizePath方法改为公有，提高代码复用性
  - 改进静态变量使用，确保上传状态正确管理
  - 添加上传失败时的文件清理机制

### v3.3.3 (美化文件管理器界面，统一设计风格) - 小版本更新
- 🎨 **界面美化升级**
  - 文件管理器页面完全重新设计，与主页保持一致的视觉风格
  - 采用渐变背景、圆角卡片、现代化按钮等设计元素
  - 优化文件列表显示，使用更清晰的文件信息布局
  - 改进上传区域设计，增加视觉吸引力和交互反馈
- ✨ **用户体验优化**
  - 文件管理按钮改为直接跳转，不再打开新窗口
  - 移除文件管理按钮前的图标，简化界面
  - 优化空状态显示，提供更友好的提示信息
  - 改进模态框设计，使用更现代的样式和布局
- 🔧 **技术改进**
  - 统一使用CSS类命名规范，提高代码可维护性
  - 添加响应式设计支持，改善移动端体验
  - 优化按钮交互效果，增加悬停动画和阴影效果

### v3.3.1 (重新设计异步格式化功能，解决看门狗错误) - 小版本更新
- 🛠️ **格式化功能重构**
  - 彻底重新设计文件系统格式化功能，解决"esp_task_wdt_reset task not found"错误
  - 采用异步任务架构，格式化操作运行在独立任务中，避免阻塞Web服务器
  - 新增格式化状态查询API接口 `/api/filesystem/format-status`
- ⚡ **性能和稳定性优化**
  - 格式化任务设置为低优先级(1)，确保不影响关键系统任务
  - 添加充足的vTaskDelay延时，让出CPU时间避免看门狗超时
  - Web服务器立即响应格式化请求，不再等待耗时操作完成
- 🎯 **用户体验优化**
  - 前端采用轮询方式实时显示格式化进度
  - 格式化过程中实时更新状态提示"格式化进行中，请稍候..."
  - 格式化完成后自动刷新界面，显示最新的文件系统状态
  - 避免格式化过程中的假死现象
- 🔧 **技术改进**
  - FileManager新增异步方法：startFormatFileSystem()、isFormatting()、getFormatResult()
  - 格式化任务自动管理生命周期，任务完成后自我删除
  - 增强错误处理，支持格式化失败的恢复机制

### v3.3.0 (新增SPIFFS文件管理功能) - 大版本更新
- 🆕 **全新文件管理器模块**
  - 新增FileManager类，完整的SPIFFS文件系统管理
  - 支持文件上传、下载、删除、重命名、创建等操作
  - 提供文件系统状态监控和容量显示
  - 支持多种文件类型的MIME类型识别
- 🎨 **现代化文件管理界面**
  - 美观的文件管理器Web界面，支持拖拽上传
  - 文件图标分类显示（📄📁🖼️🎵等）
  - 实时文件系统状态显示（总容量、已使用、可用空间）
  - 响应式设计，支持移动端操作
- ✨ **丰富的文件操作功能**
  - 批量文件上传，支持进度条显示
  - 在线文件创建和编辑（文本文件）
  - 文件重命名和批量管理
  - 文件系统格式化功能（双重确认保护）
- 🔗 **主界面集成**
  - 在系统管理页面添加"📁 文件管理器"按钮
  - 新窗口打开，不影响主界面使用
  - 完整的API端点支持RESTful操作
- 🛡️ **安全和稳定性**
  - 路径清理和验证，防止目录遍历攻击
  - 文件大小检查，防止存储空间溢出
  - 完善的错误处理和用户提示

### v3.2.18 (彻底解决弹窗闪烁问题) - 小版本更新
- 🎯 **弹窗优化**
  - 彻底解决上传完成后弹窗来回切换的闪烁问题
  - 合并重复的提示信息，减少弹窗数量
  - 升级成功后只显示一次综合提示信息
- ✨ **流程简化**
  - 移除"正在重启设备..."的冗余提示
  - 静默执行重启过程，避免中间状态弹窗
  - 延长初始提示显示时间（3秒），让用户充分了解状态
- 🔧 **体验提升**
  - 一次性告知用户完整流程："设备将自动重启并刷新页面"
  - 重启过程完全静默，直到最终成功重连
  - 消除视觉干扰，提供更流畅的用户体验

### v3.2.17 (优化重启提示体验) - 小版本更新
- 🎯 **提示优化**
  - 大幅减少重启过程中的弹窗频率，避免界面闪烁
  - 重连检测只在关键节点显示提示（第1、10、15次重试）
  - 移除冗余的"正在重新连接设备"提示
- ✨ **用户体验改进**
  - 静默进行重连检测，减少视觉干扰
  - 保持必要的状态反馈，避免用户困惑
  - 提升整体使用流畅性和舒适度
- 🔧 **逻辑优化**
  - 简化重启流程的状态提示逻辑
  - 优化弹窗显示时机和频率控制
  - 清理不必要的时间戳变量

### v3.2.16 (完善自动化升级体验) - 小版本更新
- 🎯 **界面简化**
  - 移除手动重启设备按钮，完全自动化流程
  - 更新成功提示文案，明确说明自动重启流程
  - 清理冗余的JavaScript函数和事件处理
- 🚀 **完全自动化**
  - 升级成功后无任何手动操作，全程自动化
  - 简化用户界面，减少不必要的交互元素
  - 提升操作流畅性和用户体验

### v3.2.15 (固件升级自动化流程优化) - 小版本更新
- 🚀 **自动化升级流程**
  - 固件升级成功后自动重启设备，无需手动操作
  - 设备重启后自动检测连接状态并刷新网页
  - 智能重连机制，最多重试20次确保连接成功
- ✨ **用户体验提升**
  - 升级过程全自动化，减少用户操作步骤
  - 实时状态提示，清楚显示重启和重连进度
  - 容错处理，重连失败时提供手动刷新提示
- 🔧 **流程优化**
  - 升级成功2秒后自动重启设备
  - 8秒后开始检测设备重启状态
  - 每6秒重试一次连接，最多重试2分钟

### v3.2.14 (优化固件升级界面显示) - 小版本更新
- 🎨 **界面简化优化**
  - 移除固件升级标签页中所有图标（📱、⚠️、📁、🚀、✅、❌、🔄）
  - 采用纯文字显示，界面更加简洁清爽
  - 保持功能完整性的同时提升视觉简洁度
- ✨ **用户体验改进**
  - 减少视觉干扰，突出核心功能
  - 文字表达更直接明了
  - 符合简约设计理念

### v3.2.13 (修复WiFi信号强度显示逻辑) - 小版本更新
- 🔧 **信号强度显示修复**
  - 修正信号条显示顺序：从左到右由弱到强（低→高）
  - 信号条高度：8px → 12px → 16px → 20px
  - 符合标准WiFi信号图标的逻辑习惯
- ✅ **显示逻辑优化**
  - 弱信号时只显示左侧低信号条
  - 强信号时显示所有信号条
  - 信号强度表示更加直观准确
- 🔄 **版本号同步**
  - 更新Web界面显示的固件版本号为v3.2.13
  - 保持版本号与项目进度同步

### v3.2.12 (完善WiFi信号图标对齐) - 小版本更新
- 🎯 **信号条对齐修复**
  - 所有信号条现在对齐底边显示
  - 修复信号条视觉对齐问题
  - 设置固定容器高度确保一致性
- ✅ **视觉效果优化**
  - 信号条从底部对齐向上延伸
  - 符合标准WiFi信号图标显示规范
  - 提供更好的视觉层次感

### v3.2.11 (修复WiFi信号图标显示) - 小版本更新
- 🔧 **WiFi信号图标修复**
  - 修正信号条高度排列顺序（从左到右：高→低）
  - 符合常见WiFi信号图标的视觉习惯
  - 提升用户界面的直观性和易用性
- ✅ **显示逻辑优化**
  - 强信号时左侧高信号条亮起
  - 弱信号时只有右侧低信号条亮起
  - 信号强度表示更加直观准确

### v3.2.10 (清理调试信息) - 小版本更新
- 🧹 **代码清理优化**
  - 移除所有调试用的console.log输出
  - 清理后端冗余的printf调试信息
  - 保持代码简洁和性能优化
- ✅ **功能完善**
  - 进度条功能完全正常工作
  - 保留核心的上传进度监控逻辑
  - 用户界面更加流畅和专业

### v3.2.9 (实现真实上传进度显示) - 小版本更新
- 🎯 **彻底解决进度条问题**
  - 发现根本问题：上传速度太快，错过中间进度
  - 使用XMLHttpRequest替代fetch，实现真实上传进度监控
  - 直接监听upload.progress事件，实时更新进度条
- ✅ **双重进度显示**
  - 上传阶段：显示文件传输进度（0-100%）
  - 处理阶段：显示后端OTA写入进度
  - 完整覆盖整个OTA升级流程
- ✅ **用户体验优化**
  - 真实反映文件上传速度和进度
  - 详细的进度日志和状态提示
  - 流畅的进度条动画效果

### v3.2.8 (增强调试和数据类型修复) - 小版本更新
- 🔧 **调试信息增强**
  - 后端添加详细的OTA状态和进度日志输出
  - 前端添加完整状态数据和上传过程日志
  - 确保状态监控在上传过程中正常运行
- ✅ **JSON数据类型修复**
  - 确保progress字段返回正确的数字类型
  - 强制转换totalSize和writtenSize为整数类型
  - 避免前端解析数据类型错误
- ✅ **上传流程优化**
  - 添加上传开始和完成的详细日志
  - 确保fetch请求不阻塞状态监控
  - 提高调试信息的可读性

### v3.2.7 (修复后端进度计算问题) - 小版本更新
- 🎯 **根本性修复进度条问题**
  - 发现真正问题：后端动态模式下getProgress()返回-1
  - 修复OTAManager进度计算逻辑，基于已写入数据智能估算
  - 简化前端逻辑，直接使用后端返回的真实进度
- ✅ **智能进度算法**
  - 0-500KB: 按比例计算0-50%进度
  - 500KB-1MB: 按比例计算50-90%进度  
  - 1MB以上: 按比例计算90-100%进度
- ✅ **代码优化**
  - 移除前端复杂的模拟进度逻辑
  - 统一进度条更新机制
  - 减少调试日志输出频率

### v3.2.5 (深度修复进度条显示问题) - 小版本更新
- 🐛 **深度修复Web界面进度条显示问题**
  - 添加详细的DOM元素存在性检查
  - 强制设置进度条的CSS样式属性
  - 增强UI更新的健壮性和可靠性
- ✅ **全面调试支持**
  - 添加DOM元素获取状态的详细日志
  - 记录实际的CSS样式更新过程
  - 提供完整的UI更新调试信息
- ✅ **强化样式控制**
  - 强制设置进度条的width、height、background等属性
  - 确保CSS transition效果正常工作
  - 防止样式被其他CSS规则覆盖

### v3.2.4 (修复Web界面进度条动态更新) - 小版本更新
- 🐛 **修复Web界面进度条不变化的问题**
  - 解决动态模式下进度条固定为50%不变的问题
  - 基于用户选择的文件大小计算真实上传进度
  - 进度条能够实时反映实际的上传进度
- ✅ **智能进度计算**
  - 优先使用选择文件的大小计算精确进度
  - 回退机制：无文件信息时使用估算模式
  - 进度范围控制：1%-99%，避免显示异常值
- ✅ **改进用户体验**
  - 显示真实的文件传输进度和大小信息
  - 添加浏览器控制台调试日志
  - 提供更准确的进度反馈和状态显示

### v3.2.3 (优化动态OTA进度显示) - 小版本更新
- ✅ **优化动态大小模式的进度显示**
  - 修复动态模式下进度显示为"0.0%"的问题
  - 在上传过程中显示"已写入 xxx 字节 (动态大小模式)"
  - Web界面支持动态进度显示，显示"上传中..."状态
- ✅ **增强用户体验**
  - 动态模式下进度条显示50%避免用户困惑
  - 提供更清晰的状态反馈和进度信息
  - 改进JSON状态返回，包含progressText字段
- ✅ **完善调试信息**
  - 区分动态模式和正常模式的日志输出
  - 提供更准确的上传状态跟踪
  - 优化错误信息的可读性

### v3.2.2 (实现动态大小OTA上传支持) - 小版本更新
- 🐛 **修复ESP32 WebServer文件大小检测问题**
  - 解决upload.totalSize在UPLOAD_FILE_START阶段为0的问题
  - 实现动态大小OTA上传，不依赖预知文件大小
  - 新增setActualSize()函数在上传完成后设置实际大小
- ✅ **增强OTA上传兼容性**
  - 支持UPDATE_SIZE_UNKNOWN模式的动态上传
  - 改进文件大小验证逻辑，适应不同上传场景
  - 优化空间检查时机，避免过早失败
- ✅ **完善错误处理机制**
  - 新增数据大小不匹配的详细错误报告
  - 改进状态检查逻辑，支持动态和静态两种模式
  - 提供更准确的调试信息和错误定位

### v3.2.1 (修复OTA升级状态管理问题) - 小版本更新
- 🐛 **修复OTA固件上传状态管理问题**
  - 修复"OTA未处于写入状态"错误，优化状态检查逻辑
  - 改进WebServer文件上传响应处理机制
  - 分离上传回调和POST响应处理，避免状态冲突
- ✅ **增强OTA调试功能**
  - 新增详细的状态变化日志记录
  - 添加数据大小和写入进度验证
  - 增强错误报告的准确性和详细程度
- ✅ **提高OTA升级稳定性**
  - 优化状态机逻辑，减少状态切换异常
  - 改进错误处理和恢复机制
  - 提升固件升级成功率和用户体验

### v3.2.0 (最大化Flash空间利用) - 大版本更新
- ✅ **重新设计分区表以最大化利用16MB Flash**
  - APP分区从3.2MB扩大到6MB（增加87.5%）
  - SPIFFS从1.6MB扩大到4MB（增加150%）
  - Flash利用率从约50%提升到99%
  - 移除非必要分区，专注核心功能
- ✅ **超大固件支持**
  - 支持高达6MB的复杂固件
  - 可集成AI、音视频处理等大型功能模块
  - 为未来功能扩展预留充足空间
- ✅ **大容量文件系统**
  - 4MB SPIFFS可存储大量网页资源、配置文件、日志
  - 支持丰富的用户界面和数据存储需求
- ✅ **分区信息实时显示**
  - 启动时显示详细的分区配置信息
  - 验证OTA分区配置的正确性
  - 实时监控可用固件空间
- ✅ **企业级存储规划**
  - 为复杂项目和长期发展设计
  - 消除固件大小限制的开发顾虑
  - 提供工业级应用的存储基础

### v3.1.0 (新增OTA固件升级功能) - 大版本更新
- ✅ **新增OTA固件升级模块**
  - 全新的`OTAManager`类，采用C++模块化设计
  - 支持.bin格式固件文件的在线升级
  - 完整的升级状态管理（空闲、上传、写入、成功、失败）
  - 实时升级进度监控和显示
  - 自动空间检查和错误处理机制
- ✅ **Web界面OTA升级功能**
  - 新增"固件升级"标签页，现代化UI设计
  - 支持文件选择、上传和进度实时显示
  - 升级过程中的详细状态反馈
  - 升级成功后的一键重启功能
  - 升级失败时的重试机制
- ✅ **增强的Web服务器API**
  - `/ota-upload` - 处理固件文件上传
  - `/ota-status` - 获取实时升级状态
  - `/ota-reboot` - 升级成功后重启设备
  - 支持大文件分块上传和状态监控
- ✅ **完善的安全机制**
  - 文件格式验证（仅支持.bin文件）
  - 存储空间预检查（预留10%缓冲空间）
  - 升级过程中的错误恢复机制
  - 上传中断和异常处理
- ✅ **用户体验优化**
  - 升级过程中的友好提示和警告
  - 实时进度条和百分比显示
  - 直观的成功/失败结果反馈
  - 防止升级过程中的误操作

### v3.0.20 (优化WiFi扫描加载状态显示) - 小版本更新
- ✅ **简化WiFi扫描加载状态显示**
  - 移除networkList区域中的scanLoading加载圈圈
  - 只保留扫描按钮上的加载状态指示器
  - 解决扫描时出现两个重复加载圈圈的问题
- ✅ **优化用户界面体验**
  - 扫描时只显示按钮上的"扫描中..."状态
  - 移除不必要的重复视觉元素
  - 提供更简洁清爽的扫描体验
- ✅ **简化JavaScript代码**
  - 移除所有对scanLoading元素的引用和操作
  - 简化scanWiFi和displayNetworks函数逻辑
  - 减少DOM操作的复杂性

### v3.0.19 (修复WiFi扫描重复调用错误) - 小版本更新
- 🐛 **修复WiFi扫描重复调用时的JavaScript错误**
  - 修复scanLoading元素在第二次扫描时为null导致的TypeError
  - 问题原因：displayNetworks函数替换networkList内容时删除了scanLoading元素
  - 解决方案：在scanWiFi和displayNetworks函数中添加null检查
- ✅ **优化扫描加载状态管理**
  - 在scanWiFi函数中添加scanLoading元素的存在性检查
  - 在displayNetworks函数中重新创建scanLoading元素
  - 确保每次扫描时都有正确的加载状态指示器
- ✅ **增强代码健壮性**
  - 防止因DOM元素不存在导致的JavaScript运行时错误
  - 提供更稳定的WiFi扫描用户体验
  - 解决重复扫描时的功能异常问题

### v3.0.18 (移除密码显示切换功能) - 小版本更新
- ✅ **移除密码显示/隐藏切换功能**
  - 删除HTML中的password-toggle元素和👁图标
  - 删除JavaScript中的togglePassword函数
  - 移除🙈图标的动态切换功能
- ✅ **简化密码输入体验**
  - 密码输入框保持传统的password类型
  - 移除可能导致图标重叠的界面元素
  - 提供更简洁清爽的输入界面

### v3.0.17 (修复重复扫描提示) - 小版本更新
- 🐛 **修复重复的"扫描中..."提示问题**
  - 移除HTML中scanLoading元素内的静态"扫描中..."文本
  - 保留按钮上的动态"扫描中..."提示
  - 解决WiFi扫描时显示两个重复提示的问题
- ✅ **优化用户界面体验**
  - 扫描时只显示一个"扫描中..."提示
  - 保持加载动画的视觉效果
  - 提供更清晰简洁的用户反馈

### v3.0.16 (清理调试信息) - 小版本更新
- ✅ **清理详细调试信息**
  - 移除loadSavedWiFiConfigs函数中的详细步骤日志
  - 移除displaySavedWiFiConfigs函数中的数据统计日志
  - 移除deleteWiFiConfig函数中的操作过程日志
- ✅ **保留基本调试输出**
  - 保留关键错误信息的console.error输出
  - 保留DOM元素检查的错误提示
  - 保留必要的异常处理调试信息
- ✅ **优化代码简洁性**
  - 减少不必要的调试信息输出
  - 保持功能完整性的同时提升代码可读性
  - 降低浏览器控制台的信息噪音

### v3.0.15 (修复WiFi连接网络切换导致的界面刷新问题) - 小版本更新
- 🐛 **修复WiFi连接成功后的网络切换问题**
  - 修复ESP32连接新WiFi后IP地址变化导致的HTTP连接重置错误
  - 优化错误处理逻辑，识别"Failed to fetch"错误为可能的连接成功
  - 解决WiFi实际连接成功但前端显示连接失败的问题
- ✅ **智能错误处理机制**
  - 当出现连接重置错误时，自动判断为WiFi连接可能成功
  - 延时3秒后自动刷新界面状态和配置列表
  - 提供友好的用户提示："WiFi连接可能成功，正在检查状态..."
- ✅ **改进用户体验**
  - 解决WiFi保存后配置列表需要手动刷新的问题
  - 自动处理网络环境变化导致的连接中断
  - 确保WiFi连接成功后界面能正确更新显示

### v3.0.14 (修复WiFi连接成功后界面刷新问题) - 小版本更新
- 🐛 **修复WiFi连接成功后界面不自动刷新问题**
  - 为updateStatus和loadSystemInfo函数添加缓存控制机制
  - 使用时间戳参数和HTTP无缓存头部防止浏览器缓存
  - 修复连接成功后需要手动刷新才能看到状态更新的问题
- ✅ **优化WiFi连接后的界面刷新策略**
  - 连接成功后1秒和3秒分别进行两次状态刷新
  - 使用async/await确保状态更新操作完成
  - 同时刷新WiFi状态、配置列表和系统信息
- ✅ **增强数据获取的实时性**
  - 所有状态获取API请求都添加缓存控制
  - 确保获取到服务器端的最新状态数据
  - 解决WiFi状态变化后界面显示延迟的问题
- ✅ **改进刷新信息功能**
  - refreshInfo函数改为异步执行
  - 同时刷新系统信息、WiFi状态和配置列表
  - 提供更完整的信息更新体验

### v3.0.13 (修复DOM元素空值错误) - 小版本更新
- 🐛 **修复DOM元素访问空值错误**
  - 在loadSavedWiFiConfigs函数中添加DOM元素空值检查
  - 防止savedWiFiLoading和savedWiFiList元素为null时的错误
  - 解决"Cannot read properties of null (reading 'classList')"错误
- ✅ **增强代码健壮性**
  - 添加详细的错误日志和警告信息
  - 优雅处理DOM元素不存在的情况
  - 确保删除操作能正常完成而不中断
- ✅ **改进错误处理机制**
  - 区分不同类型的DOM访问错误
  - 提供清晰的错误信息便于调试
  - 保证核心功能在异常情况下的稳定性

### v3.0.12 (增强前端调试和双重刷新机制) - 小版本更新
- 🐛 **强化前端界面刷新机制**
  - 删除成功后立即刷新配置列表
  - 增加延时双重刷新确保数据更新
  - 使用async/await确保刷新操作完成
- ✅ **全面增强前端调试信息**
  - 删除操作每个步骤的详细日志输出
  - 配置列表显示过程的完整跟踪
  - HTTP请求和响应的状态监控
- ✅ **优化用户体验**
  - 提供更详细的操作状态反馈
  - 确保界面状态与服务器数据同步
  - 便于问题排查和状态确认

### v3.0.11 (强化缓存控制和调试信息) - 小版本更新
- 🐛 **解决浏览器缓存导致的刷新问题**
  - 前端请求添加时间戳参数防止浏览器缓存
  - 设置强制无缓存的HTTP头部信息
  - 服务器端添加缓存控制响应头
- ✅ **增强调试信息输出**
  - 前端添加详细的配置加载和删除过程日志
  - 服务器端增强WiFi配置处理的调试输出
  - 便于问题排查和状态监控
- ✅ **优化HTTP请求处理**
  - 明确指定GET方法和无缓存头部
  - 服务器端详细记录配置处理过程
  - 提高数据获取的实时性和准确性

### v3.0.10 (优化WiFi配置删除后的界面刷新) - 小版本更新
- 🐛 **修复删除后界面刷新时序问题**
  - 删除成功后延时500ms再刷新配置列表
  - 确保NVS数据完全刷新后再更新界面显示
  - 解决删除成功但界面仍显示已删除配置的问题
- ✅ **增强删除操作可靠性**
  - 服务器端删除操作完成后等待100ms NVS数据刷新
  - 前端延时刷新避免读取到过期的缓存数据
  - 提高删除操作的用户体验和数据一致性
- ✅ **优化用户界面响应**
  - 删除操作完成后自动刷新配置列表
  - 无需用户手动刷新页面即可看到最新状态
  - 提供更流畅的配置管理体验

### v3.0.9 (修复WiFi配置删除路由问题) - 小版本更新
- 🐛 **修复删除请求路由冲突问题**
  - 将删除WiFi配置的路由从DELETE /wifi-configs改为POST /delete-wifi-config
  - 解决ESP32 WebServer库对同一路径不同HTTP方法的处理冲突
  - 确保删除请求能正确路由到删除处理函数
- ✅ **优化HTTP请求处理**
  - 明确指定GET方法用于获取WiFi配置列表
  - 使用POST方法和FormData传递删除参数
  - 避免路径和HTTP方法的冲突问题
- ✅ **增强系统兼容性**
  - 解决ESP32 WebServer库的已知限制
  - 提高删除功能的可靠性和稳定性

### v3.0.8 (修复WiFi配置删除功能) - 小版本更新
- 🐛 **修复WiFi配置删除功能核心问题**
  - 修正saveWiFiConfigs方法，删除前先清除所有现有配置
  - 解决删除配置后索引不匹配导致的显示问题
  - 确保删除操作后配置列表正确更新
- ✅ **增强删除操作调试信息**
  - 添加详细的删除过程调试输出
  - 打印所有配置状态，便于问题诊断
  - 增强删除操作的错误处理和状态反馈
- ✅ **优化配置存储逻辑**
  - 删除配置时先清除NVS中的旧数据
  - 重新排列有效配置，保持索引连续性
  - 提高配置管理的数据一致性

### v3.0.7 (修复WiFi状态信息显示顺序) - 小版本更新
- 🐛 **修复状态信息显示顺序问题**
  - 修正HTML结构中currentWiFi和statusDetail的位置关系
  - 确保"当前网络"信息显示在"IP地址和信号强度"信息之前
  - 解决v3.0.5版本中状态信息顺序调整未生效的问题
- ✅ **优化用户体验**
  - 状态信息按重要性优先级正确排序
  - 用户首先看到当前连接的WiFi网络名称
  - 然后查看具体的IP地址和信号强度信息

### v3.0.6 (去掉扫描WiFi网络按钮图标) - 小版本更新
- ✅ **简化扫描按钮设计**
  - 去掉扫描WiFi网络按钮的📡图标
  - 采用纯文字"扫描WiFi网络"设计
  - 保持与其他按钮一致的简约风格
- ✅ **界面一致性优化**
  - 统一按钮设计语言，全部采用纯文字方式
  - 界面更加简约清爽，减少视觉干扰
  - 提升整体界面的设计一致性

### v3.0.5 (优化状态信息显示顺序) - 小版本更新
- ✅ **调整WiFi状态信息显示顺序**
  - 将"当前网络"信息调整到第一行显示
  - "IP地址和信号强度"信息调整到第二行显示
  - 提供更清晰的信息层次结构
- ✅ **优化用户体验**
  - 用户首先看到连接的WiFi网络名称
  - 然后查看具体的连接参数信息
  - 信息优先级更符合用户使用习惯

### v3.0.4 (更新页面标题) - 小版本更新
- ✅ **更新Web界面标题**
  - 将页面主标题从"ESP32S3 Monitor"更改为"小屏幕配置"
  - 更贴合实际使用场景和功能定位
  - 提供更直观的用户界面体验

### v3.0.3 (简化页面标题) - 小版本更新
- ✅ **简化Web界面标题**
  - 移除页面头部的"WiFi配置管理器"副标题
  - 保持简洁的"ESP32S3 Monitor"主标题
  - 减少页面视觉干扰，提升界面简洁度

### v3.0.2 (显示当前连接WiFi名称) - 小版本更新
- ✅ **新增当前WiFi名称显示**
  - 在状态指示器中显示当前连接的WiFi网络名称
  - 状态卡片新增绿色"当前网络"信息行
  - 仅在WiFi连接状态下显示，未连接时自动隐藏
- ✅ **系统信息页面增强**
  - 在设备信息中新增"当前WiFi"字段
  - 显示WiFi名称和连接状态
  - 未连接时显示"未连接"状态
- ✅ **API数据扩展**
  - `/status` 和 `/info` 接口新增 `wifi.ssid` 字段
  - 提供当前连接WiFi的SSID信息
  - 保持向后兼容性，新增字段不影响现有功能
- ✅ **用户体验优化**
  - 一目了然的WiFi连接状态和网络名称
  - 绿色字体突出显示当前网络信息
  - 实时更新，连接切换时自动刷新显示

### v3.0.1 (WiFi配置手动连接功能) - 小版本更新
- ✅ **新增手动WiFi切换功能**
  - 在已保存WiFi配置列表中添加"连接"按钮
  - 支持手动选择并连接任意已保存的WiFi配置
  - 连接过程中显示加载状态，防止重复操作
- ✅ **优化用户交互体验**
  - 连接按钮采用绿色主题，与删除按钮形成视觉区分
  - 连接中状态显示"连接中..."文字提示
  - 连接成功后显示IP地址和成功提示
  - 连接失败时显示详细错误信息
- ✅ **完善API接口**
  - 新增 `POST /connect-wifi` 接口处理手动连接请求
  - 支持通过配置索引指定要连接的WiFi
  - 增强错误处理和状态反馈机制
- ✅ **技术实现优化**
  - 复用WiFiManager的tryConnectToConfig方法
  - 20秒连接超时设置，提供充足的连接时间
  - 连接成功后自动刷新状态和配置列表

### v3.0.0 (多WiFi配置管理系统) - 重大功能更新
- 🚀 **全新多WiFi配置管理系统**
  - 支持保存最多3个WiFi配置，按优先级顺序自动连接
  - 新的WiFi配置会自动添加到列表中，已存在的配置会更新密码
  - 配置已满时会替换优先级最低的配置
- ✅ **智能WiFi连接策略**
  - 启动时按保存顺序依次尝试连接WiFi配置
  - 连接失败自动尝试下一个配置，全部失败后启动AP模式
  - 断线重连时也使用多WiFi配置，提高连接成功率
- ✅ **全新Web界面设计**
  - 已保存WiFi配置列表显示，包含优先级标识
  - 支持删除不需要的WiFi配置
  - 分离"已保存配置"和"添加新配置"两个功能区域
  - 实时显示可保存配置数量提示
- ✅ **增强的存储架构**
  - 新的多WiFi配置存储命名空间，与旧配置兼容
  - 支持配置的增删改查操作
  - 保持向后兼容性，自动迁移旧配置
- ✅ **完善的API接口**
  - 新增 `/wifi-configs` 获取已保存配置列表
  - 新增 `DELETE /wifi-configs` 删除指定配置
  - 增强错误处理和状态反馈
- 🎯 **技术架构升级**
  - WiFiConfig结构体封装配置数据
  - WiFiManager支持多配置连接逻辑
  - ConfigStorage扩展为多配置存储系统
  - 完整的配置生命周期管理

### v2.0.8 (简化界面图标设计) - 小版本更新
- ✅ **简化界面设计**
  - 移除标签页导航中的WiFi和系统信息图标
  - 去掉设备管理按钮中的所有图标（刷新、重置、重启）
  - 采用纯文字设计，界面更加简约清爽
- ✅ **优化视觉效果**
  - 调整按钮和标签页的内边距和布局
  - 移除不必要的CSS样式规则
  - 保持功能完整性的同时提升视觉简洁度
- ✅ **提升用户体验**
  - 减少视觉干扰，专注于功能本身
  - 文字更加清晰易读
  - 保持现代化设计风格的同时更加简约

### v2.0.7 (Web界面标签页布局优化) - 小版本更新
- ✅ **重新设计Web界面布局**
  - 将WiFi配置和系统信息分成两个独立的标签页
  - 采用现代化标签页导航设计，支持平滑切换动画
  - 优化移动端用户体验，标签页响应式适配
- ✅ **优化系统信息展示**
  - 将设备信息和设备管理功能分别放在独立卡片中
  - 重新设计按钮布局，采用网格布局和图标设计
  - 增强按钮视觉效果，添加悬停动画和渐变背景
- ✅ **改进界面交互体验**
  - 标签页切换时自动刷新系统信息
  - 优化按钮间距和视觉层次
  - 添加淡入动画效果，提升页面切换体验
- ✅ **代码结构优化**
  - 完善JavaScript事件处理逻辑
  - 修复WiFi扫描按钮状态管理问题
  - 增强CSS样式模块化和可维护性

### v2.0.6 (修复NVS写入逻辑和时序问题) - 小版本更新
- 🐛 **修复NVS配置保存的关键逻辑错误**
  - 修正了Preferences库put方法返回值的错误判断逻辑
  - putString()和putBool()返回写入字节数，0表示失败，非0表示成功
  - 之前错误地将返回值直接作为布尔值使用，导致保存状态判断错误
- 🐛 **解决NVS数据刷新时序问题**  
  - 在Web接口中保存配置后立即检查可能导致NVS数据未刷新
  - 添加100ms延时等待NVS数据刷新到Flash存储
  - 确保配置保存后的状态检查准确性
- ✅ **增强配置保存的调试信息**
  - 详细显示每个配置项的保存结果和写入字节数
  - 分别检查SSID、密码、配置标志的保存状态
  - 提供更精确的错误定位和诊断信息

### v2.0.5 (修复NVS初始化问题) - 小版本更新
- 🐛 **修复NVS存储初始化问题**
  - 添加完整的nvs_flash_init()初始化流程
  - 处理NVS分区截断和格式不兼容的自动修复
  - 增加NVS功能测试，确保读写操作正常
- ✅ **增强配置保存的详细调试**
  - 详细显示每个配置项的保存过程和结果
  - 添加NVS命名空间操作的状态检查
  - 提供更精确的错误诊断信息

### v2.0.4 (修复WiFi配置保存状态显示) - 小版本更新
- 🐛 **修复WiFi配置保存状态显示问题**
  - 修复WiFi连接成功但调试信息显示保存失败的问题
  - 增加配置保存结果的检查和警告提示
  - 改进Web界面的状态反馈，准确显示配置保存状态
- ✅ **增强调试信息**
  - 添加配置存储初始化状态检查
  - 优化WiFi连接和配置保存的调试输出
  - 提供更详细的错误信息和警告提示

### v2.0.3 (新增配置重置功能) - 小版本更新
- ✅ **新增配置重置功能**
  - 在Web界面添加"恢复默认配置"按钮
  - 支持一键清除所有WiFi和系统配置
  - 重置后自动重启设备，回到初始状态
  - 添加详细的确认对话框，防止误操作
- ✅ **增强Web界面设计**
  - 新增warning-btn样式，区分不同危险级别的操作
  - 优化按钮布局和间距
  - 改进用户交互体验
- ✅ **完善API接口**
  - 新增 `/reset` 接口用于配置重置
  - 返回JSON格式的操作结果
  - 支持错误处理和状态反馈

### v2.0.2 (Hello World任务优化) - 小版本更新
- ✅ **优化Hello World任务执行模式**
  - 修改为单次输出模式，输出一次"hello world"后自动结束
  - 优化任务生命周期管理，任务完成后自动清理状态
  - 移除无限循环和延时机制，提高系统资源利用率

### v2.0.1 (Web界面系统信息增强) - 小版本更新
- ✅ **增强Web界面系统信息显示**
  - 新增CPU频率显示（MHz）
  - 新增Flash存储大小显示
  - 新增总内存大小显示
  - 优化系统信息布局和显示顺序
- ✅ **改进延时函数使用**
  - 统一使用vTaskDelay替代delay函数
  - 符合FreeRTOS最佳实践
  - 避免阻塞其他任务执行
- ✅ **增强WiFi AP模式启动**
  - 添加详细的AP启动调试信息
  - 增加AP启动失败时的自动重试机制
  - 优化AP配置参数设置

### v2.0.0 (WiFi配置管理器) - 重大功能更新
- ✅ **新增WiFi自动管理功能**
  - 智能WiFi连接和断线重连机制
  - AP配置模式自动切换
  - WiFi连接状态实时监控
- ✅ **新增现代化Web配置界面**
  - 响应式设计，支持移动端访问
  - 现代化UI/UX设计，渐变背景和卡片布局
  - WiFi网络扫描和信号强度显示
  - 实时状态指示器和动画效果
- ✅ **新增NVS配置存储功能**
  - WiFi配置信息持久化存储
  - 系统配置参数管理
  - 配置数据的读取、写入、清除操作
- ✅ **新增Web服务器管理器**
  - HTTP服务器和RESTful API
  - JSON数据交换格式
  - 多路由处理和错误页面
- ✅ **完整的模块化架构重构**
  - ConfigStorage类：NVS存储管理
  - WiFiManager类：WiFi连接管理
  - WebServerManager类：Web服务器管理
  - 面向对象的C++设计模式
- ✅ **FreeRTOS多任务优化**
  - WiFi管理任务（优先级3）
  - Web服务器任务（优先级2）
  - 任务优先级合理分配
- ✅ **系统信息监控**
  - 芯片型号和版本信息
  - 内存使用监控
  - 运行时间统计
  - WiFi信号强度监控

### v1.0.4 (Hello World持续输出)
- ✅ 修改Hello World任务为持续输出模式
- ✅ 每秒输出一次"hello world"
- ✅ 使用vTaskDelay实现1秒延时
- ✅ 添加循环机制，支持任务持续运行直至手动停止

### v1.0.3 (Hello World单次输出)
- ✅ 修改Hello World任务为单次输出模式
- ✅ 输出一次"hello world"后任务自动结束
- ✅ 移除无限循环和延时机制
- ✅ 优化任务生命周期管理

### v1.0.2 (修复分区表重叠问题)
- 🐛 修复partitions.csv分区表重叠问题
- 🐛 修复app分区对齐问题，确保符合0x10000边界对齐要求
- ✅ 调整app0分区起始地址从0x10000到0x20000，满足64KB边界对齐
- ✅ 优化app0和app1分区大小为0x5F0000
- ✅ 调整spiffs分区偏移到0xC00000，大小为0x2F0000
- ✅ 调整coredump分区偏移到0xEF0000，确保分区边界正确对齐

### v1.0.1 (修复任务运行问题)
- 🐛 修复任务只执行一次的竞态条件问题
- ✅ 调整isRunning标志设置时机，在任务创建前设置
- ✅ 优化任务循环逻辑，避免任务意外退出
- ✅ 确保Hello World能够持续每秒输出

### v1.0.0 (初始版本)
- ✅ 创建基础项目结构
- ✅ 实现Monitor监控器类
- ✅ 实现Hello World输出任务
- ✅ 配置FreeRTOS任务调度
- ✅ 设置任务优先级为2
- ✅ 实现每秒输出功能
- ✅ 添加模块化C++设计
- ✅ 使用printf进行调试输出
- ✅ setup()仅做初始化，loop()不处理任务

## 开发规范

1. 程序采用模块化设计，优先使用C++
2. 使用FreeRTOS进行开发，通过任务实现功能
3. setup()只做初始化，loop()不做任何任务处理
4. 使用printf输出调试信息（无串口配置）
5. 合理调整各个任务的优先级
6. WiFi配置信息保存在NVS中持久化存储
7. Web界面采用现代化响应式设计

## 故障排除

### WiFi连接问题
- 检查WiFi名称和密码是否正确
- 确认WiFi网络的加密方式（支持WPA/WPA2）
- 检查WiFi信号强度是否足够
- 尝试重启设备重新配置

### Web界面访问问题
- 确认已连接到ESP32S3-Config热点
- 检查IP地址是否正确（AP模式：192.168.4.1）
- 尝试清除浏览器缓存
- 使用不同浏览器测试

### 设备重启问题
- 检查电源供应是否稳定
- 查看串口监视器的错误日志
- 确认固件版本兼容性

## 未来计划

- [ ] 添加MQTT客户端功能
- [ ] 实现OTA固件更新
- [ ] 添加传感器数据采集
- [ ] 实现数据可视化界面
- [ ] 添加定时任务功能
- [ ] 支持多种认证方式 